<div class="min-h-screen bg-gray-100">
  <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-10">
    <h1 class="text-2xl font-bold text-gray-900">Secure View</h1>
    <p class="mt-1 text-sm text-gray-600">
      Link ID: <span class="font-mono">{{ linkId() }}</span>
    </p>

    @if (isLoading()) {
      <div class="mt-8 text-center text-gray-600" aria-busy="true">Loadingâ€¦</div>
    }

    @if (state() === 'error' && error(); as err) {
      <div class="mt-8 rounded-md bg-red-50 p-4 text-sm text-red-700" role="alert" aria-live="polite">
        {{ err }}
      </div>
    }

    @if (isReady()) {
      <div class="mt-8">
        @if (pdfUrl()) {
          <iframe
            class="w-full rounded-md shadow bg-white"
            style="min-height: 80vh"
            [src]="pdfUrl()"
            title="Document"
          ></iframe>
        } @else {
          <img
            [src]="imageUrl()"
            class="max-w-full rounded-md shadow bg-white"
            alt="Document"
          />
        }
      </div>
    }

    <p class="mt-8 text-xs text-gray-500">Viewing is watermarked and may be time-tracked.</p>
  </div>
</div>
